<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>

<title>Slider Wave Editor Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Slider Wave Editor Architecture </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Slider's source code makes a central distinction between two different facilities: the user interface and the internal data model. The following information contains some discussion on each of those topics. Make sure you've read the user documentation and are familiar with how Slider works; otherwise, you'll have a bit of trouble understanding the developer documentation.</p>
<h2><a class="anchor" id="uiexpl_sec"></a>
The User Interface</h2>
<p>Since this program was primarily intended to be interactive, the existence of the user interface is practically the most important part of the program. In fact, the only reason for the existence of the data model back-end was so that this program could be made useful, of course: so that you could export your data to other <em>real</em> audio programs.</p>
<p>The program's user interface makes extensive use of a widget combination called a scientific notation editor. Ideally, this should be implemented as a GTK+ widget class, but right now, the source code implements each part of the ideal widget as a separate widget.</p>
<p>This paragraph is additional commentary, which you may skip. One feature of this program's user interface that makes it unusual and probably un-user-friendly is its utilization of widgets that are dynamically created and destroyed in an unconventional way. This unconventional widget policy also leads to slightly less conventional practices regarding the programming of its user interface. Originally, the idea of this program's user interface was drawn out in Inkscape, then later created within Glade. The Glade source files are included within this source distribution. The conventional editing facilities of Glade made it not very suitable to store this dynamic user interface from within an XML file then load that data from the file. So instead, a slightly older version of Glade was used which had the feature of being able to generate C code that builds the user interface. This code was then modified as necessary. Because of the modifications, you should not try to regenerate the code from the Glade project file unless you know what you are doing.</p>
<p>The editing area contains one window that is used to edit the fundamental frequency, and a series of one or more other windows that can be used to edit harmonics. Both such types of windows are generated from a single function, <a class="el" href="interface_8h.html#a089de11bfcaa695abc018daff3659e01" title="Create the widgets for a wave editor window.">create_wvedit_holder()</a>, and the parameter <em>first_type</em> specifies if a fundamental editor should be returned.</p>
<p>On the top of the main window is a combo box that is used to select the current fundamental frequency being edited. When a different fundamental frequency is selected, all of the windows currently in the editing area are destroyed and new windows corresponding to the selected fundamental set are created. Data is stored within the program's data model to save the state of the previous editor windows.</p>
<p>Moving on from here, you should be able to look at the source code in <a class="el" href="interface_8h.html" title="Graphical user interface building functions.">interface.h</a> and <a class="el" href="wv__editors_8h.html" title="Functions for the wave editors.">wv_editors.h</a> for the implementation of the user interface.</p>
<p>The following functions from <a class="el" href="wv__editors_8h.html" title="Functions for the wave editors.">wv_editors.h</a> are relevant to the user interface: <a class="el" href="wv__editors_8h.html#a435eedc0fbb0ec6bef39de81a32550ab" title="Frees a wave editor window&#39;s slider data.">free_slider_data()</a>, <a class="el" href="wv__editors_8h.html#a6dcc482a2038d32a7b3b3c2536c0c842" title="Adds a wave editor window.">add_wv_editor()</a>, <a class="el" href="wv__editors_8h.html#a17fddd2b68e3f4285cae96e953f3bcf9" title="Deletes a wave editor window.">remove_wv_editor()</a>, <a class="el" href="wv__editors_8h.html#a5a23dfc42abe92e726382044bca3a10b" title="Restores the values of the precision sliders.">restore_prec_sliders()</a>, <a class="el" href="wv__editors_8h.html#ab30e2b639c4fdc8f5642f81e97eb2a3c" title="Selects a fundamental frequency set.">select_fund_freq()</a>, <a class="el" href="wv__editors_8h.html#a1e43e3a2270afae015e16278e867876d" title="Unselects a fundamental frequency set.">unselect_fund_freq()</a>.</p>
<h2><a class="anchor" id="datamod_sec"></a>
The Data Model</h2>
<p>The program has one global variable which stores all information related to the waveform data within the program: <a class="el" href="wv__editors_8h.html#a29f539adc0913de71519df79735231c7" title="An array of all of the fundamental frequency sets.">wv_all_freqs</a>. This is implemented as a wrapper type to a GArray.</p>
<p>The reason why wrapper types are used in this program is to replace ugly syntax such as this:</p>
<div class="fragment"><pre class="fragment">
cur_fund = &amp;g_array_index (wv_all_freqs, Wv_Fund_Freq, i);
cur_harmonic = &amp;g_array_index (cur_fund-&gt;harmonics, Wv_Data, j);
cur_harmonic-&gt;harmc_num;
</pre></div><p>with that:</p>
<div class="fragment"><pre class="fragment">
wv_all_freqs-&gt;d[i].harmonics-&gt;d[j].harmc_num;
</pre></div><p>Since the program can have only one fundamental frequency selected at a time, there is another global variable which stores the index of the currently selected fundamental set, <a class="el" href="wv__editors_8h.html#ae23f78aa6a131d3916ccfb2fb7d522bc" title="Current fundamental set.">g_fund_set</a>. Fundamental frequencies inside of the C code are always counted as zero-based indices, even though the user interface displays the numbers starting from one.</p>
<p>Many of the functions take a parameter to specify which fundamental frequency they should work with. The reason why these functions have this behavior rather than using <a class="el" href="wv__editors_8h.html#ae23f78aa6a131d3916ccfb2fb7d522bc" title="Current fundamental set.">g_fund_set</a> is because it allows them to work with a fundamental frequency other than the one which is currently selected. This is important for file loading.</p>
<p>Moving on from here, you should be able to look at the source code in the rest of this program. I hope you found this document useful. </p>
</div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 14 2013 19:54:36 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
